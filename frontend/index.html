<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Tournaments API - Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('frontend', path='/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('frontend', path='/mobile-enhancements.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container-fluid px-3">
            <nav class="navbar navbar-expand-lg">
                <div class="navbar-brand d-flex align-items-center">
                    <i class="fas fa-chess-king me-2"></i>
                    <h1 class="mb-0 d-none d-sm-block">Chess Tournaments API</h1>
                    <h1 class="mb-0 d-sm-none fs-6">Chess API</h1>
                </div>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    <div class="navbar-nav ms-auto">
                        <button class="nav-btn active" data-section="home">
                            <i class="fas fa-home"></i> <span>Início</span>
                        </button>
                        <button class="nav-btn" data-section="tournaments">
                            <i class="fas fa-trophy"></i> <span>Torneios</span>
                        </button>
                        <button class="nav-btn" data-section="players">
                            <i class="fas fa-users"></i> <span>Jogadores</span>
                        </button>
                        <button class="nav-btn" data-section="news">
                            <i class="fas fa-newspaper"></i> <span>Notícias</span>
                        </button>
                        <button class="nav-btn" data-section="announcements">
                            <i class="fas fa-bullhorn"></i> <span>Comunicados</span>
                        </button>
                        <button class="nav-btn" data-section="admin">
                            <i class="fas fa-cog"></i> <span>Admin</span>
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container-fluid px-3">
            <!-- Loading Overlay -->
            <div class="loading-overlay" id="loadingOverlay">
                <div class="spinner"></div>
                <p>Carregando dados...</p>
            </div>

            <!-- Home Section -->
            <section id="home" class="section active">
                <div class="hero text-center">
                    <h2 class="mb-3">Bem-vindo à Chess Tournaments API</h2>
                    <p class="mb-4">API moderna e robusta para consulta de informações sobre xadrez da CBX</p>
                    <div class="row g-3 mb-4">
                        <div class="col-6 col-md-3">
                            <div class="stat-card text-center p-3">
                                <i class="fas fa-server mb-2"></i>
                                <h3 id="apiStatus" class="fs-6 mb-1">Verificando...</h3>
                                <p class="small mb-0">Status da API</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="stat-card text-center p-3">
                                <i class="fas fa-database mb-2"></i>
                                <h3 id="cacheSize" class="fs-6 mb-1">0</h3>
                                <p class="small mb-0">Itens em Cache</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="stat-card text-center p-3">
                                <i class="fas fa-chart-line mb-2"></i>
                                <h3 class="fs-6 mb-1">1.0.2</h3>
                                <p class="small mb-0">Versão Atual</p>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="stat-card text-center p-3">
                                <i class="fas fa-clock mb-2"></i>
                                <h3 id="currentTime" class="fs-6 mb-1">--:--</h3>
                                <p class="small mb-0">Horário</p>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex flex-wrap gap-2 justify-content-center">
                        <button class="btn btn-primary" onclick="showSection('tournaments')">
                            <i class="fas fa-trophy"></i> <span>Ver Torneios</span>
                        </button>
                        <button class="btn btn-secondary" onclick="showSection('players')">
                            <i class="fas fa-users"></i> <span>Buscar Jogadores</span>
                        </button>
                        <a href="http://localhost:8000/docs" target="_blank" class="btn btn-outline-primary">
                            <i class="fas fa-book"></i> <span>Documentação</span>
                        </a>
                    </div>
                </div>
            </section>

            <!-- Tournaments Section -->
            <section id="tournaments" class="section">
                <div class="section-header text-center mb-4">
                    <h2><i class="fas fa-trophy"></i> Torneios CBX</h2>
                    <p>Consulte torneios por ano e mês</p>
                </div>
                
                <div class="row g-3 mb-4">
                    <div class="col-12 col-sm-6 col-md-3">
                        <label for="tournamentYear" class="form-label">Ano:</label>
                        <select id="tournamentYear" class="form-select">
                            <option value="2025">2025</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                        </select>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3">
                        <label for="tournamentMonth" class="form-label">Mês:</label>
                        <select id="tournamentMonth" class="form-select">
                            <option value="">Todos</option>
                            <option value="1">Janeiro</option>
                            <option value="2">Fevereiro</option>
                            <option value="3">Março</option>
                            <option value="4">Abril</option>
                            <option value="5">Maio</option>
                            <option value="6">Junho</option>
                            <option value="7">Julho</option>
                            <option value="8">Agosto</option>
                            <option value="9">Setembro</option>
                            <option value="10">Outubro</option>
                            <option value="11">Novembro</option>
                            <option value="12">Dezembro</option>
                        </select>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3">
                        <label for="tournamentLimit" class="form-label">Limite:</label>
                        <select id="tournamentLimit" class="form-select">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 d-flex align-items-end">
                        <button class="btn btn-primary w-100" onclick="searchTournaments()">
                            <i class="fas fa-search"></i> Buscar
                        </button>
                    </div>
                </div>

                <div id="tournamentsResults" class="results-container">
                    <div class="empty-state text-center">
                        <i class="fas fa-trophy"></i>
                        <p>Use os filtros acima para buscar torneios</p>
                    </div>
                </div>
            </section>

            <!-- Players Section -->
            <section id="players" class="section">
                <div class="section-header text-center mb-4">
                    <h2><i class="fas fa-users"></i> Jogadores CBX</h2>
                    <p>Consulte jogadores por estado</p>
                </div>
                
                <div class="row g-3 mb-4">
                    <div class="col-12 col-md-6">
                        <label for="playerUF" class="form-label">Estado (UF):</label>
                        <select id="playerUF" class="form-select">
                            <option value="SP">São Paulo (SP)</option>
                            <option value="RJ">Rio de Janeiro (RJ)</option>
                            <option value="MG">Minas Gerais (MG)</option>
                            <option value="RS">Rio Grande do Sul (RS)</option>
                            <option value="PR">Paraná (PR)</option>
                            <option value="SC">Santa Catarina (SC)</option>
                            <option value="BA">Bahia (BA)</option>
                            <option value="GO">Goiás (GO)</option>
                            <option value="PE">Pernambuco (PE)</option>
                            <option value="CE">Ceará (CE)</option>
                            <option value="DF">Distrito Federal (DF)</option>
                            <option value="ES">Espírito Santo (ES)</option>
                            <option value="PB">Paraíba (PB)</option>
                            <option value="RN">Rio Grande do Norte (RN)</option>
                            <option value="AL">Alagoas (AL)</option>
                            <option value="SE">Sergipe (SE)</option>
                            <option value="MA">Maranhão (MA)</option>
                            <option value="PI">Piauí (PI)</option>
                            <option value="MT">Mato Grosso (MT)</option>
                            <option value="MS">Mato Grosso do Sul (MS)</option>
                            <option value="AC">Acre (AC)</option>
                            <option value="RO">Rondônia (RO)</option>
                            <option value="RR">Roraima (RR)</option>
                            <option value="AM">Amazonas (AM)</option>
                            <option value="AP">Amapá (AP)</option>
                            <option value="PA">Pará (PA)</option>
                            <option value="TO">Tocantins (TO)</option>
                        </select>
                    </div>
                    <div class="col-12 col-md-3">
                        <label for="playerPages" class="form-label">Páginas:</label>
                        <select id="playerPages" class="form-select">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="5">5</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                    <div class="col-12 col-md-3 d-flex align-items-end">
                        <button class="btn btn-primary w-100" onclick="searchPlayers()">
                            <i class="fas fa-search"></i> Buscar
                        </button>
                    </div>
                </div>

                <div id="playersResults" class="results-container">
                    <div class="empty-state text-center">
                        <i class="fas fa-users"></i>
                        <p>Use os filtros acima para buscar jogadores</p>
                    </div>
                </div>
            </section>

            <!-- News Section -->
            <section id="news" class="section">
                <div class="section-header text-center mb-4">
                    <h2><i class="fas fa-newspaper"></i> Notícias CBX</h2>
                    <p>Últimas notícias da Confederação Brasileira de Xadrez</p>
                </div>
                
                <div class="row g-3 mb-4">
                    <div class="col-12 col-md-6">
                        <label for="newsPages" class="form-label">Páginas:</label>
                        <select id="newsPages" class="form-select">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                    <div class="col-12 col-md-6 d-flex align-items-end">
                        <button class="btn btn-primary w-100" onclick="searchNews()">
                            <i class="fas fa-search"></i> Buscar Notícias
                        </button>
                    </div>
                </div>

                <div id="newsResults" class="results-container">
                    <div class="empty-state text-center">
                        <i class="fas fa-newspaper"></i>
                        <p>Clique em "Buscar Notícias" para carregar as últimas notícias</p>
                    </div>
                </div>
            </section>

            <!-- Announcements Section -->
            <section id="announcements" class="section">
                <div class="section-header text-center mb-4">
                    <h2><i class="fas fa-bullhorn"></i> Comunicados CBX</h2>
                    <p>Comunicados oficiais da Confederação Brasileira de Xadrez</p>
                </div>
                
                <div class="row g-3 mb-4">
                    <div class="col-12 col-md-6">
                        <label for="announcementPages" class="form-label">Páginas:</label>
                        <select id="announcementPages" class="form-select">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                    <div class="col-12 col-md-6 d-flex align-items-end">
                        <button class="btn btn-primary w-100" onclick="searchAnnouncements()">
                            <i class="fas fa-search"></i> Buscar Comunicados
                        </button>
                    </div>
                </div>

                <div id="announcementsResults" class="results-container">
                    <div class="empty-state text-center">
                        <i class="fas fa-bullhorn"></i>
                        <p>Clique em "Buscar Comunicados" para carregar os comunicados</p>
                    </div>
                </div>
            </section>

            <!-- Admin Section -->
            <section id="admin" class="section">
                <div class="section-header text-center mb-4">
                    <h2><i class="fas fa-cog"></i> Administração</h2>
                    <p>Gerenciamento da API e cache</p>
                </div>
                
                <div class="row g-4 mb-4">
                    <div class="col-12 col-md-6 col-lg-4">
                        <div class="admin-card h-100 p-3">
                            <h3 class="h5"><i class="fas fa-heartbeat"></i> Status da API</h3>
                            <div id="healthStatus" class="status-indicator mb-3">
                                <span class="status-dot"></span>
                                <span class="status-text">Verificando...</span>
                            </div>
                            <button class="btn btn-outline-primary btn-sm w-100" onclick="checkHealth()">
                                <i class="fas fa-sync"></i> Verificar Status
                            </button>
                        </div>
                    </div>
                    
                    <div class="col-12 col-md-6 col-lg-4">
                        <div class="admin-card h-100 p-3">
                            <h3 class="h5"><i class="fas fa-database"></i> Cache</h3>
                            <p class="mb-3">Itens em cache: <span id="adminCacheSize">0</span></p>
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary btn-sm" onclick="getCacheStats()">
                                    <i class="fas fa-chart-bar"></i> Ver Stats
                                </button>
                                <button class="btn btn-outline-danger btn-sm" onclick="clearCache()">
                                    <i class="fas fa-trash"></i> Limpar Cache
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-12 col-lg-4">
                        <div class="admin-card h-100 p-3">
                            <h3 class="h5"><i class="fas fa-link"></i> Links Úteis</h3>
                            <div class="d-grid gap-2">
                                <a href="http://localhost:8000/docs" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-book"></i> Swagger Docs
                                </a>
                                <a href="http://localhost:8000/redoc" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-file-alt"></i> ReDoc
                                </a>
                                <a href="http://localhost:8000/" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-server"></i> API Root
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="admin-card p-3">
                    <h3 class="h5"><i class="fas fa-terminal"></i> API Response</h3>
                    <pre id="apiResponse" class="code-block">Nenhuma resposta ainda...</pre>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer mt-5">
        <div class="container-fluid px-3 text-center">
            <p class="mb-1">&copy; 2025 Chess Tournaments API - Feito com ❤️ para a comunidade brasileira de xadrez</p>
            <p class="mb-0 small">API não oficial da CBX</p>
        </div>
    </footer>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container position-fixed top-0 end-0 p-3"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('frontend', path='/script.js') }}"></script>
</body>
</html>
